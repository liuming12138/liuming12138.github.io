(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-activity-zhuanpan-index"],{"40df":function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.zhuanp-p[data-v-e96a57b0]{width:100vw;overflow:hidden}.place[data-v-e96a57b0]{background-color:#fff;height:%?88?%}.app-bar[data-v-e96a57b0]{display:flex;align-items:center;position:fixed;top:0;left:0;width:100%;height:%?88?%;background-color:#f54543;padding:0 %?30?%;justify-content:space-between;z-index:10}.app-bar uni-navigator[data-v-e96a57b0]{text-align:center}.app-bar uni-navigator uni-image[data-v-e96a57b0]{width:%?34?%;margin:%?5?% auto 0}.app-bar uni-navigator uni-text[data-v-e96a57b0]{font-size:%?34?%;font-family:SourceHanSansCN;font-weight:400;color:#fff}.app-bar > uni-view uni-text[data-v-e96a57b0]{font-size:%?34?%;font-family:SourceHanSansCN;font-weight:400;color:hsla(0,0%,100%,.6);display:inline-block;margin:0 %?30?%}.app-bar > uni-view uni-text.on[data-v-e96a57b0]{color:#fff}uni-page-body[data-v-e96a57b0]{background-color:#fb2f58}body.?%PAGE?%[data-v-e96a57b0]{background-color:#fb2f58}.con[data-v-e96a57b0]{background:url(/static/img/ag.png) no-repeat;background-color:#fb2f58;background-size:100% auto}\r\n/* 转盘 */.canvas-container[data-v-e96a57b0]{margin:0 auto;position:relative;width:%?600?%;height:%?600?%;background:url(/static/img/circle.png) no-repeat;background-size:cover;border-radius:50%}.canvas[data-v-e96a57b0]{width:100%;height:100%;display:block!important;border-radius:50%}.canvas-content[data-v-e96a57b0]{position:absolute;left:0;top:0;z-index:1;display:block;width:%?600?%;height:%?600?%;border-radius:inherit\r\n  /* background-clip: padding-box; */\r\n  /* background-color: #ffcb3f; */}.canvas-element[data-v-e96a57b0]{position:relative;z-index:1;width:inherit;height:inherit;border-radius:50%}.canvas-list[data-v-e96a57b0]{position:absolute;left:0;top:0;width:inherit;height:inherit;z-index:9999}.canvas-item[data-v-e96a57b0]{position:absolute;left:0;top:0;width:100%;height:100%;color:#e4370e\r\n  /* text-shadow: 0 1upx 1upx rgba(255, 255, 255, 0.6); */}.canvas-item-text[data-v-e96a57b0]{position:relative;display:block;padding-top:%?46?%;margin:0 auto;text-align:center;-webkit-transform-origin:50% %?300?%;transform-origin:50% %?300?%;display:flex;flex-direction:column;align-items:center;color:#fb778b}.canvas-item-text uni-text[data-v-e96a57b0]{font-size:%?24?%;padding:%?30?% %?20?%;width:27%}\r\n/* 分隔线 */.canvas-line[data-v-e96a57b0]{position:absolute;left:0;top:0;width:inherit;height:inherit;z-index:99}.canvas-litem[data-v-e96a57b0]{position:absolute;left:%?300?%;top:0;width:%?3?%;height:%?300?%;background-color:rgba(228,55,14,.4);overflow:hidden;-webkit-transform-origin:50% %?300?%;transform-origin:50% %?300?%}\r\n/**  \r\n* 抽奖按钮  \r\n*/.canvas-btn[data-v-e96a57b0]{position:absolute;left:%?224?%;top:%?190?%;z-index:3;width:%?153?%;height:%?193?%;text-decoration:none;background:url(/static/img/btn.png) no-repeat;background-size:cover}.app-1[data-v-e96a57b0]{padding:%?90?% 0 %?60?%}.app-1 uni-image[data-v-e96a57b0]{width:%?520?%;margin:0 auto}.app-2[data-v-e96a57b0]{display:flex;align-items:center;margin-bottom:%?30?%;padding:%?20?% 0;border-top:1px solid rgba(255,237,150,.4);border-bottom:1px solid rgba(255,237,150,.4)}.app-2 uni-view[data-v-e96a57b0]{flex:1;text-align:center}.app-2 uni-view uni-text[data-v-e96a57b0]{display:block;margin-bottom:%?10?%;font-size:%?36?%;font-family:Source Han Sans CN;font-weight:400;color:#fff}.app-2 uni-view uni-text[data-v-e96a57b0]:nth-child(2){font-size:%?24?%}.app-2 > uni-text[data-v-e96a57b0]{display:block;width:1px;height:33px;background:rgba(255,237,150,.4)}.app-3[data-v-e96a57b0]{padding:%?40?% 0 %?60?%;text-align:center}.app-3 > uni-text[data-v-e96a57b0]:nth-of-type(1){font-size:%?28?%;font-family:Source Han Sans CN;font-weight:400;color:#fff}.app-3 > uni-text[data-v-e96a57b0]:nth-of-type(2){font-size:%?28?%;font-family:Source Han Sans CN;font-weight:400;color:#ffe736;padding:%?20?% %?10?% %?8?%;display:inline-block;border-bottom:1px solid #ffe736}.app-3 uni-view[data-v-e96a57b0]{background:url(/static/img/cjbtn.png) no-repeat;background-size:cover;width:%?580?%;height:%?75?%;line-height:%?75?%;margin:%?20?% auto 0;font-size:%?36?%;font-family:Source Han Sans CN;font-weight:500;color:#ff402b}.app-4[data-v-e96a57b0]{padding:0 0 %?40?%}.app-4 uni-text[data-v-e96a57b0]{display:block;background:url(/static/img/md.png) no-repeat;background-size:100% 100%;width:%?300?%;height:%?30?%;line-height:%?30?%;margin:0 auto;text-align:center;font-size:%?36?%;font-family:Source Han Sans CN;font-weight:500;color:#fff}.app-5[data-v-e96a57b0]{border-radius:5px;padding:%?20?% 0;box-sizing:border-box}.app-5 .list[data-v-e96a57b0]{display:flex;width:100%;justify-content:center}.app-5 .list .swiper-con[data-v-e96a57b0]{display:flex;align-items:center;box-sizing:border-box}.app-5 .list .swiper-con uni-text[data-v-e96a57b0]{flex:1;text-align:center;padding:0 %?10?%;color:#1a2b3c}.app-5 .list .swiper-con uni-text[data-v-e96a57b0]:nth-child(3){flex:2;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:#ffe736}.app-5 .list .swiper-con uni-text[data-v-e96a57b0]:nth-child(1){white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.app-5[data-v-e96a57b0] uni-swiper{height:%?400?%!important}.app-6[data-v-e96a57b0]{margin:0 auto;box-sizing:border-box;border-radius:5px;overflow:hidden;padding:%?15?%}.app-mak[data-v-e96a57b0]{background-color:#fff;width:%?675?%;padding:%?10?%;border-radius:5px;margin:0 auto %?40?%}.app-jl[data-v-e96a57b0]{padding:0 %?40?%;display:flex;justify-content:flex-end}.app-jl uni-text[data-v-e96a57b0]{width:%?180?%;height:%?60?%;text-align:center;line-height:%?60?%;display:block;background-color:#e6050b;color:#fff;border-radius:%?80?%;font-size:%?24?%}[data-v-e96a57b0] .u-mode-center-box{background-color:#fb2f58!important}[data-v-e96a57b0] .u-mode-center-box .u-icon__icon{color:#fff!important}.content .zjjl[data-v-e96a57b0]{padding:%?40?%}.content .zjjl > uni-text[data-v-e96a57b0]{display:block;text-align:center;margin-bottom:%?40?%;font-size:%?36?%;color:#000}.content .zjjl > uni-view[data-v-e96a57b0]{text-align:center;height:%?440?%;overflow-y:auto}.content .zjjl > uni-view uni-text[data-v-e96a57b0]{color:#000}.content .zjjl > uni-view uni-view[data-v-e96a57b0]{display:flex;justify-content:space-between;padding:%?28?% 0}.content .zjjl > uni-view uni-view uni-text[data-v-e96a57b0]{font-size:%?24?%;color:#000;text-align:start}.content .zjjl > uni-view uni-view uni-text[data-v-e96a57b0]:nth-child(1){flex:1;margin-right:%?20?%}.content .zjjl > uni-view uni-view uni-text[data-v-e96a57b0]:nth-child(2){color:rgba(0,0,0,.8)}',""]),t.exports=a},"4b0b":function(t,a,e){"use strict";e.r(a);var i=e("edc5"),n=e("da45");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(s);e("7451");var r=e("f0c5"),o=Object(r["a"])(n["default"],i["b"],i["c"],!1,null,"e96a57b0",null,!1,i["a"],void 0);a["default"]=o.exports},7451:function(t,a,e){"use strict";var i=e("8043"),n=e.n(i);n.a},8043:function(t,a,e){var i=e("40df");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("4f06").default;n("03413737",i,!0,{sourceMap:!1,shadowMode:!1})},8827:function(t,a,e){"use strict";e("7a82");var i=e("ee27").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("d3b7"),e("159b"),e("14d9");var n=i(e("f07e")),s=i(e("c964")),r=e("0a10"),o={data:function(){return{shareData:{},typeColor:2,shareShow:!1,providerList:[],awardsConfig:{chance:!0,lists:[]},awardsList:[],chishu:0,animationData:{},btnDisabled:"",thanksarr:[],mold:1,r_flg:0,myPrizelist:[],id:"",shakyData:{},list:[],show:!1,jlList:[],isCJLoading:!0}},onLoad:function(t){this.id=t.id,this.initdata()},computed:{hasLogin:function(){return this.$store.state.hasLogin}},methods:{moveHandle:function(){return!1},onMyPrize:function(){uni.navigateTo({url:"/pages/mine/kabao/index"})},onPublish:function(){this.hasLogin?this.$refs.shareWx.showShare():uni.showModal({title:"提示",content:"未登录或登录超时，请重新登录！",success:function(t){t.confirm&&uni.navigateTo({url:"/pages/login/login"})}})},onPage:function(){uni.navigateBack()},onDati:function(){var t=this;return(0,s.default)((0,n.default)().mark((function a(){var e,i;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$api.useNewsApi().beginExam({id:t.shakyData.paperId});case 2:if(e=a.sent,i=e.data,1e4==i.error_code){a.next=7;break}return t.$toast(i.message),a.abrupt("return");case 7:uni.navigateTo({url:"/pages/activity/wenjuan/index?paperId="+t.shakyData.paperId+"&id="+t.shakyData.id+"&type=8"});case 8:case"end":return a.stop()}}),a)})))()},getMyPrize:function(){var t=this;return(0,s.default)((0,n.default)().mark((function a(){var e,i;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.show=!0,a.next=3,t.$api.useCouponApi().getMyPrize({activitiesId:t.id,pageNum:1,pageSize:50});case 3:e=a.sent,i=e.data,t.jlList=i;case 6:case"end":return a.stop()}}),a)})))()},initdata:function(){var t=this;return(0,s.default)((0,n.default)().mark((function a(){var e,i,s;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$api.useActivityApi().getDazhuanpanData({id:t.id});case 2:return e=a.sent,t.awardsConfig.lists=e.data.data,t.awardsConfig.lists.forEach((function(t,a){t.index=a})),a.next=7,t.$api.useActivityApi().getActivitiesInfo({id:t.id});case 7:i=a.sent,s=i.data,t.chishu=s.choujiangCount,t.shakyData=s.activitiesInfo,t.getActivitiesMemberList(),t.drawAwardRoundel(),t.shareData={title:e.data.activitiesInfo.title,image:e.data.activitiesInfo.image,desc:e.data.activitiesInfo.title},t.$onWechat(t.shareData);case 15:case"end":return a.stop()}}),a)})))()},drawAwardRoundel:function(){for(var t=this.awardsConfig.lists,a=[],e=1/t.length*360,i=0;i<t.length;i++)a.push({turn:i*e+"deg",lineTurn:i*e+e/2+"deg",award:t[i].title});this.awardsList=a},getActivitiesMemberList:function(){var t=this;return(0,s.default)((0,n.default)().mark((function a(){var e,i;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e={activitiesId:t.id,status:24,pageNum:1,pageSize:50},a.next=3,t.$api.useActivityApi().getActivitiesMemberList(e);case 3:i=a.sent,t.list=i.data;case 5:case"end":return a.stop()}}),a)})))()},playRewardStart:(0,r.debounce)((0,s.default)((0,n.default)().mark((function t(){return(0,n.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.isCJLoading=!1,t.prev=1,t.next=4,this.playReward();case 4:t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](1),console.log(t.t0),this.isCJLoading=!0;case 10:case"end":return t.stop()}}),t,this,[[1,6]])}))),300,{leading:!0,trailing:!1}),playReward:function(){var t=this;return(0,s.default)((0,n.default)().mark((function a(){var e,i,s,r,o,u;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$api.useActivityApi().getActivitiesInfo({id:t.id});case 2:if(e=a.sent,t.chishu=e.data.choujiangCount,t.shakyData=e.data.activitiesInfo,0!=e.data.choujiangCount){a.next=9;break}return t.$toast("抽奖次数已经用完"),t.isCJLoading=!0,a.abrupt("return");case 9:return a.next=11,t.$api.useActivityApi().dazhuanpanCJ({id:t.id});case 11:if(i=a.sent,1e4==i.data.error_code){a.next=16;break}return t.$toast(i.data.message),t.isCJLoading=!0,a.abrupt("return");case 16:s=i.data.data,r=s.getzi-1,o=t.awardsConfig.lists,4,4e3,t.runDeg=t.runDeg||0,t.runDeg,t.runDeg=t.runDeg+(360-t.runDeg%360)+(1440-r*(360/o.length))+1,u=uni.createAnimation({duration:4e3,timingFunction:"ease"}),u.rotate(t.runDeg).step(),t.animationData=u.export(),t.chishu=t.chishu>0?t.chishu-1:0,setTimeout((function(){uni.showModal({title:3!=s.jpStatus?"恭喜":"很遗憾",content:(3!=s.jpStatus?"获得":"未中奖")+s.jpName,showCancel:!1,confirmColor:"#DD6161",success:function(){setTimeout((function(){document.getElementById("zhuanpano").style=""}),1e3),t.isCJLoading=!0}})}),5e3),t.getActivitiesMemberList();case 30:case"end":return a.stop()}}),a)})))()}}};a.default=o},da45:function(t,a,e){"use strict";e.r(a);var i=e("8827"),n=e.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a["default"]=n.a},edc5:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){return i}));var i={uParse:e("7f99").default,uPopup:e("e699").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"app zhuanp-p"},[e("page-status",{attrs:{typeColor:t.typeColor}}),e("v-uni-view",{staticClass:"app-bar"},[e("v-uni-navigator",{attrs:{url:"#","hover-class":"none"},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.onPage.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"iconfont"},[t._v("")])],1),e("v-uni-view",{},[e("v-uni-text",{staticClass:"on"},[t._v("连工惠")])],1),e("v-uni-navigator",{attrs:{url:"#","hover-class":"none"},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.onPublish.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"iconfont icon-fenxiang"})],1)],1),e("v-uni-view",{staticClass:"place"}),e("v-uni-view",{staticClass:"con"},[e("v-uni-view",{staticClass:"app-1"},[e("v-uni-image",{attrs:{src:t.shakyData.zpImage,mode:"widthFix"}})],1),e("v-uni-view",{staticClass:"app-2"},[e("v-uni-view",{},[e("v-uni-text",[t._v(t._s(t.shakyData.seeCount))]),e("v-uni-text",[t._v("浏览量")])],1),e("v-uni-text"),e("v-uni-view",{},[e("v-uni-text",[t._v(t._s(t.shakyData.signupCount))]),e("v-uni-text",[t._v("参与人次")])],1)],1),e("v-uni-view",{staticClass:"main"},[e("v-uni-view",{staticClass:"canvas-container"},[e("v-uni-view",{staticClass:"canvas-content",attrs:{animation:t.animationData,id:"zhuanpano"}},[e("v-uni-view",{staticClass:"canvas-line"},t._l(t.awardsList,(function(t,a){return e("v-uni-view",{key:a,staticClass:"canvas-litem",style:[{transform:"rotate("+t.lineTurn+")"}]})})),1),e("v-uni-view",{staticClass:"canvas-list"},t._l(t.awardsList,(function(a,i){return e("v-uni-view",{key:i,staticClass:"canvas-item",style:[{zIndex:i}]},[e("v-uni-view",{staticClass:"canvas-item-text",style:[{transform:"rotate("+a.turn+")"}]},[e("v-uni-text",[t._v(t._s(a.award))])],1)],1)})),1)],1),t.isCJLoading?e("v-uni-view",{staticClass:"canvas-btn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.playRewardStart.apply(void 0,arguments)}}}):e("v-uni-view",{staticClass:"canvas-btn"})],1)],1),e("v-uni-view",{staticClass:"app-jl"},[e("v-uni-text",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.getMyPrize.apply(void 0,arguments)}}},[t._v("中奖记录")])],1),e("v-uni-view",{staticClass:"app-3"},[e("v-uni-text",[t._v("活动时间："+t._s(t._f("dateFiles")(t.shakyData.beginDate))+" — "+t._s(t._f("dateFiles")(t.shakyData.endDate)))]),e("v-uni-view",{},[e("v-uni-text",[t._v("剩余抽奖次数："+t._s(t.chishu)+" 次")])],1),3==t.shakyData.autoBaoming?e("v-uni-text",{on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onDati.apply(void 0,arguments)}}},[t._v("点击获得更多抽奖机会")]):t._e()],1),t.list.length>0?e("v-uni-view",{staticClass:"app-4"},[e("v-uni-text",[t._v("中奖名单")])],1):t._e(),t.list.length>0?e("v-uni-view",{staticClass:"app-mak"},[e("v-uni-view",{staticClass:"app-5"},[e("v-uni-view",{staticClass:"list"},[e("v-uni-view",{staticClass:"uni-padding-wrap"},[e("v-uni-view",{staticClass:"page-section swiper"},[e("v-uni-view",{staticClass:"page-section-spacing"},[e("v-uni-swiper",{staticClass:"swiper",attrs:{circular:!0,vertical:!0,"display-multiple-items":5,autoplay:!0,interval:2e3,duration:500}},t._l(t.list,(function(a,i){return e("v-uni-swiper-item",{key:i,staticClass:"swiper-con"},[e("v-uni-text",[t._v(t._s(t._f("nameFiles")(a.zj_name)))]),e("v-uni-text",[t._v(t._s(t._f("phoneFiles")(a.zj_phone)))]),e("v-uni-text",[t._v(t._s(a.award_remark))])],1)})),1)],1)],1)],1)],1)],1)],1):t._e(),e("v-uni-view",{staticClass:"app-4"},[e("v-uni-text",[t._v("活动说明")])],1),e("v-uni-view",{staticClass:"app-mak"},[e("v-uni-view",{staticClass:"app-6"},[e("u-parse",{attrs:{content:t.shakyData.remark}})],1)],1),e("v-uni-view",{staticStyle:{height:"60upx"}})],1),e("u-popup",{attrs:{mode:"center",show:t.show,"border-radius":"10",closeable:!0},on:{close:function(a){arguments[0]=a=t.$handleEvent(a),t.show=!1},touchmove:function(a){a.stopPropagation(),a.preventDefault(),arguments[0]=a=t.$handleEvent(a),t.moveHandle.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"content"},[e("v-uni-scroll-view",{staticStyle:{height:"600rpx",width:"600upx"},attrs:{"scroll-y":"true"}},[e("v-uni-view",{staticClass:"zjjl"},[e("v-uni-text",[t._v("中奖记录")]),t.jlList.length>0?e("v-uni-view",{},t._l(t.jlList,(function(a,i){return e("v-uni-view",{key:i,on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.onMyPrize.apply(void 0,arguments)}}},[e("v-uni-text",[t._v(t._s(a.award_remark))]),e("v-uni-text",[t._v(t._s(t._f("dateFiles")(a.create_date)))])],1)})),1):e("v-uni-view",{},[e("v-uni-text",[t._v("暂无中奖记录")])],1)],1)],1)],1)],1),e("share-wx",{ref:"shareWx"}),e("share-app",{ref:"shareApp",attrs:{shareData:t.shareData}})],1)},s=[]}}]);